<!DOCTYPE html>
<html lang=en>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>FAB DAIRY|SYED JUNAID AHMED</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="FabAcademy 2017 - SYED JUNAID AHMED" />
    <meta name="keywords" content="FabAcademy, FabLab, Final Project, 2017,fablabkerala" />
    <meta name="author" content="SYED JUNAID AHMED" />
    <link rel="shortcut icon" href="img/favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <!--  <body style="font-family: 'Roboto', sans-serif; font-size:18px"> -->
        <!-- Bootstrap Core CSS -->
        <link href="js/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!-- Theme CSS -->
        <link href="css/creative.min.css" rel="stylesheet">
          <link rel="stylesheet" href="css/w3.css">
    <link rel="stylesheet" href="css/shi_default.min.css">
        <style type="text/css">
        footer{
          clear:both;
          padding: 10px;
          text-align: center;
        }

        .footer-distributed{
          background-color: #292c2f;
          box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.12);
          box-sizing: border-box;
          width: 100%;
          text-align: left;
          font: normal 16px sans-serif;

          padding: 0px 0px;
          margin-top: 0px;
        }

        .footer-distributed .footer-left p{
          color:  #8f9296;
          font-size: 14px;
          margin: 0;
        }

        /* Footer links */

        .footer-distributed p.footer-links{
          font-size:18px;
          font-weight: bold;
          color:  #ffffff;
          margin: 0 0 10px;
          padding: 0;
        }

        .footer-distributed p.footer-links a{
          display:inline-block;
          line-height: 1.8;
          text-decoration: none;
          color:  inherit;
        }

        .footer-distributed .footer-right{
          float: right;
          margin-top: 6px;
          max-width: 180px;
        }

        .footer-distributed .footer-right a{
          display: inline-block;
          width: 35px;
          height: 35px;
          background-color:  #33383b;
          border-radius: 2px;

          font-size: 20px;
          color: #ffffff;
          text-align: center;
          line-height: 35px;

          margin-left: 3px;
        }


            </style>
</head>

<body id="page-top">
    <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">Week 11</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                  <li>
                      <a href="week10.html">Past Week</a>
                  </li>
                    <li>
                        <a href="index.html">Back to Home</a>
                    </li>
                    <li>
                        <a href="week12.html">Next Week</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
    <section class="bg-primary">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <h2 class="section-heading">Machine design</h2>
                </div>
            </div>
        </div>
    </section>
    <div class="container">
     <h2>Over View of Assignments</h2>
       <p>
         <div class="test">
         <ul style="list-style-type:square">
         <h3>Machine design</h3>

    <li>Automate your <a href="http://academy.cba.mit.edu/classes/mechanical_design/index.html">machine</a>. Document the group project and your individual contribution.</li>
      <h3>Learning outcomes</h3>
    <li>Work and communicate effectively in a team and independently</li>

<li>Analyse and solve technical problems</li>

<li>Recognise opportunities for improvements in the design</li>
       </ul>
       </div>
       </p>

</div>
    <!-- side nav bar -->
    <nav class="col-sm-3">
	<ul class="nav nav-pills nav-stacked">
		<li class="active">
			<a data-toggle="pill" href="#b1">What is Machine Design ?</a>
		</li>
		<li>
			<a data-toggle="pill" href="#b2">Work Assigned </a>
		</li>
	</ul>
</nav>
<!-- Content data -->

<div class="col-sm-9">
	<div class="tab-content">
		<div id="b1" class="tab-pane fade in active">
			<h2>What is Machine Design ?</h2>

      <p align="justify">Machine Design is one of the important branches of Engineering Design. To understand what exactly machine design or mechanical design is let us consider the example of the gear box of the car. The gear box transmits the motion and the power of the engine to the wheels of the vehicle. The gearbox comprises group of gears which are subjected to not only motion but also the load of the vehicle. For the gears to run at desired speeds and take desired loads it is important that they should be designed. During designing various calculations are performed considering desired speeds and loads and finally the gear of particular material and specific dimensions that can take all loads and that can be manufactured at least possible cost giving optimum performance is designed. In similar fashion all the components of the car, including engine, have to be designed so that they optimally meet all the functional requirements at lowest possible cost. This whole process of designing is called as machine design or mechanical design.

</p>
      
        <p align=justify><a href="http://www.brighthubengineering.com/cad-autocad-reviews-tips/9935-what-is-mechanical-design-or-machine-design/" class="w3-btn w3-purple w3-round-large"> Read More</a></p>

		</div>
		<div id="b2" class="tab-pane fade">
			<h2>Work Assigned</h2>
             <a href="http://archive.fabacademy.org/archives/2017/fablabtrivandrum/machine_building/team_1/index.html" class="w3-btn w3-purple w3-round-large"> Link to Group Project Page</a>
            <p align="justify"> The FabArm we build on Mechanical Design week had some missing components and some fixtures also broke. So we decided to redo it once again ,I have helped to build the final model of the Machine,The most of the designing and testing was done in the <a href="http://archive.fabacademy.org/archives/2017/fablabtrivandrum/students/213/week9.html">week9</a>. but this week we had to make couple of flange shafts to hold up the fab arm. This part was missing when we build the fab arm first time, that is what we did this week. We took apart a printer for a Aluminum Alloy Rod. We cut the rod for our specific need.</p>
            <center><img src="img/w11/cutting.jpg" width=80% height=auto></center>
                    <center>Cutting the Alumium Rod </center>
     <p align="justify"> Ajith and Ganadev also helped me initally and they left after some to work on the other work assigned.</p>
            <center><img src="img/w11/assembly.jpg" width=50% height=auto></center>
                    <center>Assembly of the Fab Arm </center>
            <p>After this I worked on the GUI based on kivy along with ganadev and have  used the sample code from Gestalt library to get started and understand it</p>
            <div class="snippet-container"><div class="sh_default snippet-wrap"><div class="snippet-menu sh_sourceCode"><a class="snippet-window sh_url" href="#">pop-up</a><a class="snippet-text sh_url" href="#">text</a></div><pre class="shi_pre sh_c snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>popup import Popup</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>app import App</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>gridlayout import GridLayout</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>label import Label</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>textinput import TextInput</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>button import Button</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>boxlayout import BoxLayout</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>stacklayout import StackLayout</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>uix<span class="sh_symbol">.</span>slider import Slider</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>kivy<span class="sh_symbol">.</span>config import Config</li><li></li><li>Config<span class="sh_symbol">.</span><span class="sh_function">set</span><span class="sh_symbol">(</span><span class="sh_string">'modules'</span><span class="sh_symbol">,</span> <span class="sh_string">'serial'</span><span class="sh_symbol">,</span> <span class="sh_string">''</span><span class="sh_symbol">)</span></li><li></li><li></li><li></li><li></li><li><span class="sh_preproc"># Forked</span> from DFUnitVM Oct <span class="sh_number">2013</span></li><li><span class="sh_preproc"># set</span> portname</li><li><span class="sh_preproc"># set</span> location of hex file <span class="sh_keyword">for</span> bootloader</li><li><span class="sh_preproc">#</span></li><li></li><li><span class="sh_preproc">#</span><span class="sh_symbol">------</span>IMPORTS<span class="sh_symbol">-------</span></li><li>from pygestalt import nodes</li><li>from pygestalt import interfaces</li><li>from pygestalt import machines</li><li>from pygestalt import functions</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>pygestalt<span class="sh_symbol">.</span>machines import elements</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>pygestalt<span class="sh_symbol">.</span>machines import kinematics</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>pygestalt<span class="sh_symbol">.</span>machines import state</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>pygestalt<span class="sh_symbol">.</span>utilities import notice</li><li><span class="sh_usertype">from</span><span class="sh_normal"> </span>pygestalt<span class="sh_symbol">.</span>publish <span class="sh_usertype">import</span><span class="sh_normal"> </span>rpc   #remote procedure call dispatcher</li><li>import time</li><li>import io</li><li>import threading</li><li>import serial</li><li></li><li></li><li><span class="sh_preproc">#</span><span class="sh_symbol">------</span><span class="sh_usertype">VIRTUAL</span><span class="sh_normal"> </span>MACHINE<span class="sh_symbol">------</span></li><li><span class="sh_usertype">class</span><span class="sh_normal"> </span><span class="sh_function">virtualMachine</span><span class="sh_symbol">(</span>machines<span class="sh_symbol">.</span>virtualMachine<span class="sh_symbol">):</span></li><li>    </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">initInterfaces</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        <span class="sh_keyword">if</span> self<span class="sh_symbol">.</span>providedInterface<span class="sh_symbol">:</span> self<span class="sh_symbol">.</span>fabnet <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>providedInterface     #providedInterface is defined in the <span class="sh_usertype">virtualMachine</span><span class="sh_normal"> </span>class<span class="sh_symbol">.</span></li><li>        <span class="sh_keyword">else</span><span class="sh_symbol">:</span> self<span class="sh_symbol">.</span>fabnet <span class="sh_symbol">=</span> interfaces<span class="sh_symbol">.</span><span class="sh_function">gestaltInterface</span><span class="sh_symbol">(</span><span class="sh_string">'FABNET'</span><span class="sh_symbol">,</span> interfaces<span class="sh_symbol">.</span><span class="sh_function">serialInterface</span><span class="sh_symbol">(</span>baudRate <span class="sh_symbol">=</span> <span class="sh_number">115200</span><span class="sh_symbol">,</span> interfaceType <span class="sh_symbol">=</span> <span class="sh_string">'ftdi'</span><span class="sh_symbol">,</span> portName <span class="sh_symbol">=</span> <span class="sh_string">'/dev/tty.usbserial-FT0METG6'</span><span class="sh_symbol">))</span></li><li>        </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">initControllers</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>xAxisNode <span class="sh_symbol">=</span> nodes<span class="sh_symbol">.</span><span class="sh_function">networkedGestaltNode</span><span class="sh_symbol">(</span><span class="sh_string">'X Axis'</span><span class="sh_symbol">,</span> self<span class="sh_symbol">.</span>fabnet<span class="sh_symbol">,</span> filename <span class="sh_symbol">=</span> <span class="sh_string">'086-005a.py'</span><span class="sh_symbol">,</span> persistence <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>persistence<span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>xNode <span class="sh_symbol">=</span> nodes<span class="sh_symbol">.</span><span class="sh_function">compoundNode</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>xAxisNode<span class="sh_symbol">)</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">initCoordinates</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>position <span class="sh_symbol">=</span> state<span class="sh_symbol">.</span><span class="sh_function">coordinate</span><span class="sh_symbol">([</span><span class="sh_string">'mm'</span><span class="sh_symbol">])</span></li><li>    </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">initKinematics</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>xAxis <span class="sh_symbol">=</span> elements<span class="sh_symbol">.</span>elementChain<span class="sh_symbol">.</span><span class="sh_function">forward</span><span class="sh_symbol">([</span>elements<span class="sh_symbol">.</span>microstep<span class="sh_symbol">.</span><span class="sh_function">forward</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">),</span> elements<span class="sh_symbol">.</span>stepper<span class="sh_symbol">.</span><span class="sh_function">forward</span><span class="sh_symbol">(</span><span class="sh_number">1.8</span><span class="sh_symbol">),</span> elements<span class="sh_symbol">.</span>leadscrew<span class="sh_symbol">.</span><span class="sh_function">forward</span><span class="sh_symbol">(</span><span class="sh_number">6.096</span><span class="sh_symbol">),</span> elements<span class="sh_symbol">.</span>invert<span class="sh_symbol">.</span><span class="sh_function">forward</span><span class="sh_symbol">(</span>True<span class="sh_symbol">)])</span></li><li>        </li><li>        self<span class="sh_symbol">.</span>stageKinematics <span class="sh_symbol">=</span> kinematics<span class="sh_symbol">.</span><span class="sh_function">direct</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">)</span> #direct drive on all axes</li><li>    </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">initFunctions</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>move <span class="sh_symbol">=</span> functions<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(</span>virtualMachine <span class="sh_symbol">=</span> self<span class="sh_symbol">,</span> virtualNode <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>xNode<span class="sh_symbol">,</span> axes <span class="sh_symbol">=</span> <span class="sh_symbol">[</span>self<span class="sh_symbol">.</span>xAxis<span class="sh_symbol">],</span> kinematics <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>stageKinematics<span class="sh_symbol">,</span> machinePosition <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>position<span class="sh_symbol">,</span>planner <span class="sh_symbol">=</span> <span class="sh_string">'null'</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>jog <span class="sh_symbol">=</span> functions<span class="sh_symbol">.</span><span class="sh_function">jog</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>move<span class="sh_symbol">)</span> #an incremental wrapper <span class="sh_keyword">for</span> the move function</li><li>        pass</li><li>        </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">initLast</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li><span class="sh_preproc">#       self</span><span class="sh_symbol">.</span>machineControl<span class="sh_symbol">.</span><span class="sh_function">setMotorCurrents</span><span class="sh_symbol">(</span>aCurrent <span class="sh_symbol">=</span> <span class="sh_number">0.8</span><span class="sh_symbol">,</span> bCurrent <span class="sh_symbol">=</span> <span class="sh_number">0.8</span><span class="sh_symbol">,</span> cCurrent <span class="sh_symbol">=</span> <span class="sh_number">0.8</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">#       self</span><span class="sh_symbol">.</span>xyzNode<span class="sh_symbol">.</span><span class="sh_function">setVelocityRequest</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">)</span>  #clear velocity <span class="sh_usertype">on</span><span class="sh_normal"> </span>nodes<span class="sh_symbol">.</span> Eventually this will be put in the motion planner on initialization to <span class="sh_usertype">match</span><span class="sh_normal"> </span>state<span class="sh_symbol">.</span></li><li>        pass</li><li>    </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">publish</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li><span class="sh_preproc">#       self</span><span class="sh_symbol">.</span>publisher<span class="sh_symbol">.</span><span class="sh_function">addNodes</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>machineControl<span class="sh_symbol">)</span></li><li>        pass</li><li>    </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">getPosition</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        <span class="sh_keyword">return</span> <span class="sh_cbracket">{</span><span class="sh_string">'position'</span><span class="sh_symbol">:</span>self<span class="sh_symbol">.</span>position<span class="sh_symbol">.</span><span class="sh_function">future</span><span class="sh_symbol">()</span><span class="sh_cbracket">}</span></li><li>    </li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">setPosition</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span> position  <span class="sh_symbol">=</span> <span class="sh_symbol">[</span>None<span class="sh_symbol">]):</span></li><li>        self<span class="sh_symbol">.</span>position<span class="sh_symbol">.</span>future<span class="sh_symbol">.</span><span class="sh_function">set</span><span class="sh_symbol">(</span>position<span class="sh_symbol">)</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">setSpindleSpeed</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span> speedFraction<span class="sh_symbol">):</span></li><li><span class="sh_preproc">#       self</span><span class="sh_symbol">.</span>machineControl<span class="sh_symbol">.</span><span class="sh_function">pwmRequest</span><span class="sh_symbol">(</span>speedFraction<span class="sh_symbol">)</span></li><li>        pass</li><li></li><li></li><li><span class="sh_usertype">class</span><span class="sh_normal"> </span><span class="sh_function">FabControl</span><span class="sh_symbol">(</span>GridLayout<span class="sh_symbol">):</span></li><li>    def <span class="sh_function">__init__</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span> <span class="sh_symbol">**</span>kwargs<span class="sh_symbol">):</span></li><li>        <span class="sh_function">super</span><span class="sh_symbol">(</span>FabControl<span class="sh_symbol">,</span> self<span class="sh_symbol">).</span><span class="sh_function">__init__</span><span class="sh_symbol">(**</span>kwargs<span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>cols <span class="sh_symbol">=</span> <span class="sh_number">3</span></li><li>        self<span class="sh_symbol">.</span>row <span class="sh_symbol">=</span> <span class="sh_number">3</span></li><li></li><li>        <span class="sh_usertype">global</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">,</span> tempmotor1<span class="sh_symbol">,</span> tempmotor2<span class="sh_symbol">,</span> tempmotor3</li><li>        tempmotor1 <span class="sh_symbol">=</span> <span class="sh_number">120</span></li><li>        tempmotor2 <span class="sh_symbol">=</span> <span class="sh_number">90</span></li><li>        tempmotor3 <span class="sh_symbol">=</span> <span class="sh_number">90</span></li><li></li><li>        serialcom <span class="sh_symbol">=</span> serial<span class="sh_symbol">.</span><span class="sh_function">Serial</span><span class="sh_symbol">()</span></li><li>        serialcom<span class="sh_symbol">.</span>braudrate <span class="sh_symbol">=</span> <span class="sh_number">115200</span></li><li>        serialcom<span class="sh_symbol">.</span>port <span class="sh_symbol">=</span> <span class="sh_string">"/dev/tty.usbmodem1421"</span></li><li>        serialcom<span class="sh_symbol">.</span><span class="sh_function">open</span><span class="sh_symbol">()</span></li><li></li><li>        </li><li></li><li></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span><span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">'Motor1  [ 0 to 120 ] '</span><span class="sh_symbol">))</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor1 <span class="sh_symbol">=</span> <span class="sh_function">Slider</span><span class="sh_symbol">(</span>min<span class="sh_symbol">=-</span><span class="sh_number">30</span><span class="sh_symbol">,</span> max<span class="sh_symbol">=</span><span class="sh_number">120</span><span class="sh_symbol">,</span> value<span class="sh_symbol">=</span><span class="sh_number">120</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>motor1<span class="sh_symbol">.</span><span class="sh_function">bind</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>Motor1Change<span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor1<span class="sh_symbol">)</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor1value <span class="sh_symbol">=</span> <span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_function">str</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor1<span class="sh_symbol">.</span>value<span class="sh_symbol">))</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor1value<span class="sh_symbol">)</span></li><li></li><li></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span><span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">'Motor2  [ 0 to 180 ] '</span><span class="sh_symbol">))</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor2 <span class="sh_symbol">=</span> <span class="sh_function">Slider</span><span class="sh_symbol">(</span>min<span class="sh_symbol">=</span><span class="sh_number">0</span><span class="sh_symbol">,</span> max<span class="sh_symbol">=</span><span class="sh_number">180</span><span class="sh_symbol">,</span> value<span class="sh_symbol">=</span><span class="sh_number">90</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>motor2<span class="sh_symbol">.</span><span class="sh_function">bind</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>Motor2Change<span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor2<span class="sh_symbol">)</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor2value <span class="sh_symbol">=</span> <span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_function">str</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor2<span class="sh_symbol">.</span>value<span class="sh_symbol">))</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor2value<span class="sh_symbol">)</span></li><li></li><li></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span><span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">'Motor3  [ 45 to 130 ] '</span><span class="sh_symbol">))</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor3 <span class="sh_symbol">=</span> <span class="sh_function">Slider</span><span class="sh_symbol">(</span>min<span class="sh_symbol">=</span><span class="sh_number">45</span><span class="sh_symbol">,</span> max<span class="sh_symbol">=</span><span class="sh_number">130</span><span class="sh_symbol">,</span> value<span class="sh_symbol">=</span><span class="sh_number">90</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>motor3<span class="sh_symbol">.</span><span class="sh_function">bind</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>Motor3Change<span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor3<span class="sh_symbol">)</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor3value <span class="sh_symbol">=</span> <span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_function">str</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor3<span class="sh_symbol">.</span>value<span class="sh_symbol">))</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor3value<span class="sh_symbol">)</span></li><li></li><li></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span><span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">'Motor4  [ -100 to 100 ] '</span><span class="sh_symbol">))</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor4 <span class="sh_symbol">=</span> <span class="sh_function">Slider</span><span class="sh_symbol">(</span>min<span class="sh_symbol">=-</span><span class="sh_number">100</span><span class="sh_symbol">,</span> max<span class="sh_symbol">=</span><span class="sh_number">100</span><span class="sh_symbol">,</span> value<span class="sh_symbol">=</span><span class="sh_number">0</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>motor4<span class="sh_symbol">.</span><span class="sh_function">bind</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>Motor4Change<span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor4<span class="sh_symbol">)</span></li><li></li><li>        self<span class="sh_symbol">.</span>motor4value <span class="sh_symbol">=</span> <span class="sh_function">Label</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_function">str</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor4<span class="sh_symbol">.</span>value<span class="sh_symbol">))</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor4value<span class="sh_symbol">)</span></li><li></li><li></li><li>        self<span class="sh_symbol">.</span>move <span class="sh_symbol">=</span> <span class="sh_function">Button</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">"Move"</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>move<span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span>move<span class="sh_symbol">.</span><span class="sh_function">bind</span><span class="sh_symbol">(</span>on_press<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>initiatemove<span class="sh_symbol">)</span></li><li></li><li>        self<span class="sh_symbol">.</span>startrec <span class="sh_symbol">=</span> <span class="sh_function">Button</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">"Start Record"</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>startrec<span class="sh_symbol">)</span></li><li></li><li>        self<span class="sh_symbol">.</span>stoprec <span class="sh_symbol">=</span> <span class="sh_function">Button</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">"Stop Record"</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>stoprec<span class="sh_symbol">)</span></li><li></li><li>        self<span class="sh_symbol">.</span>play <span class="sh_symbol">=</span> <span class="sh_function">Button</span><span class="sh_symbol">(</span>text<span class="sh_symbol">=</span><span class="sh_string">"Play"</span><span class="sh_symbol">)</span></li><li>        self<span class="sh_symbol">.</span><span class="sh_function">add_widget</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>play<span class="sh_symbol">)</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">Motor4Change</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span> instance<span class="sh_symbol">,</span> value<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>motor4value<span class="sh_symbol">.</span>text <span class="sh_symbol">=</span> <span class="sh_function">str</span><span class="sh_symbol">(</span>value<span class="sh_symbol">)</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">Motor1Change</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span> instance<span class="sh_symbol">,</span> value<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>motor1value<span class="sh_symbol">.</span>text <span class="sh_symbol">=</span> <span class="sh_function">str</span><span class="sh_symbol">(</span>value<span class="sh_symbol">)</span></li><li>        threading<span class="sh_symbol">.</span><span class="sh_function">Thread</span><span class="sh_symbol">(</span>target<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>movemotor1<span class="sh_symbol">).</span><span class="sh_function">start</span><span class="sh_symbol">()</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">Motor2Change</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span> instance<span class="sh_symbol">,</span> value<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>motor2value<span class="sh_symbol">.</span>text <span class="sh_symbol">=</span> <span class="sh_function">str</span><span class="sh_symbol">(</span>value<span class="sh_symbol">)</span></li><li>        threading<span class="sh_symbol">.</span><span class="sh_function">Thread</span><span class="sh_symbol">(</span>target<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>movemotor2<span class="sh_symbol">).</span><span class="sh_function">start</span><span class="sh_symbol">()</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">Motor3Change</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span> instance<span class="sh_symbol">,</span> value<span class="sh_symbol">):</span></li><li>        self<span class="sh_symbol">.</span>motor3value<span class="sh_symbol">.</span>text <span class="sh_symbol">=</span> <span class="sh_function">str</span><span class="sh_symbol">(</span>value<span class="sh_symbol">)</span></li><li>        threading<span class="sh_symbol">.</span><span class="sh_function">Thread</span><span class="sh_symbol">(</span>target<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>movemotor3<span class="sh_symbol">).</span><span class="sh_function">start</span><span class="sh_symbol">()</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">initiatemove</span><span class="sh_symbol">(</span>self<span class="sh_symbol">,</span>instance<span class="sh_symbol">):</span></li><li><span class="sh_preproc">        # time</span><span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">)</span></li><li>        threading<span class="sh_symbol">.</span><span class="sh_function">Thread</span><span class="sh_symbol">(</span>target<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>movemotor4<span class="sh_symbol">).</span><span class="sh_function">start</span><span class="sh_symbol">()</span></li><li>        threading<span class="sh_symbol">.</span><span class="sh_function">Thread</span><span class="sh_symbol">(</span>target<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>movemotor1<span class="sh_symbol">).</span><span class="sh_function">start</span><span class="sh_symbol">()</span></li><li>        threading<span class="sh_symbol">.</span><span class="sh_function">Thread</span><span class="sh_symbol">(</span>target<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>movemotor2<span class="sh_symbol">).</span><span class="sh_function">start</span><span class="sh_symbol">()</span></li><li>        threading<span class="sh_symbol">.</span><span class="sh_function">Thread</span><span class="sh_symbol">(</span>target<span class="sh_symbol">=</span>self<span class="sh_symbol">.</span>movemotor3<span class="sh_symbol">).</span><span class="sh_function">start</span><span class="sh_symbol">()</span></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">movemotor4</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        print <span class="sh_string">"movemotor4 called"</span></li><li>        global stage</li><li><span class="sh_preproc">        # print</span> stage</li><li><span class="sh_preproc">        # print</span> self<span class="sh_symbol">.</span>motor4<span class="sh_symbol">.</span>value</li><li><span class="sh_preproc">        # print</span> self<span class="sh_symbol">.</span>motor1<span class="sh_symbol">.</span>value</li><li><span class="sh_preproc">        # print</span> self<span class="sh_symbol">.</span>motor2<span class="sh_symbol">.</span>value</li><li><span class="sh_preproc">        # print</span> self<span class="sh_symbol">.</span>motor3<span class="sh_symbol">.</span>value</li><li></li><li><span class="sh_preproc">        # </span></li><li>        movemotor4 <span class="sh_symbol">=</span> <span class="sh_type">int</span><span class="sh_symbol">(</span>self<span class="sh_symbol">.</span>motor4<span class="sh_symbol">.</span>value<span class="sh_symbol">)</span></li><li></li><li>        supercoords <span class="sh_symbol">=</span> <span class="sh_symbol">[[</span>movemotor4<span class="sh_symbol">]]</span></li><li></li><li>        <span class="sh_keyword">for</span> coords <span class="sh_usertype">in</span><span class="sh_normal"> </span>supercoords<span class="sh_symbol">:</span></li><li>            stage<span class="sh_symbol">.</span><span class="sh_function">move</span><span class="sh_symbol">(</span>coords<span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">)</span></li><li>            status <span class="sh_symbol">=</span> stage<span class="sh_symbol">.</span>xAxisNode<span class="sh_symbol">.</span><span class="sh_function">spinStatusRequest</span><span class="sh_symbol">()</span></li><li>            <span class="sh_keyword">while</span> status<span class="sh_symbol">[</span><span class="sh_string">'stepsRemaining'</span><span class="sh_symbol">]</span> <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span><span class="sh_symbol">:</span></li><li>                time<span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(</span><span class="sh_number">0.001</span><span class="sh_symbol">)</span></li><li>                status <span class="sh_symbol">=</span> stage<span class="sh_symbol">.</span>xAxisNode<span class="sh_symbol">.</span><span class="sh_function">spinStatusRequest</span><span class="sh_symbol">()</span></li><li></li><li></li><li></li><li></li><li><span class="sh_preproc">    # ser</span> <span class="sh_symbol">=</span> serial<span class="sh_symbol">.</span><span class="sh_function">Serial</span><span class="sh_symbol">()</span></li><li><span class="sh_preproc">    # ser</span><span class="sh_symbol">.</span>braudrate <span class="sh_symbol">=</span> <span class="sh_number">115200</span></li><li><span class="sh_preproc">    # ser</span><span class="sh_symbol">.</span>port <span class="sh_symbol">=</span> <span class="sh_string">"/dev/tty.usbmodem1411"</span></li><li><span class="sh_preproc">    # ser</span><span class="sh_symbol">.</span><span class="sh_function">open</span><span class="sh_symbol">()</span></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">movemotor1</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        print <span class="sh_string">"movemotor1called"</span></li><li>        <span class="sh_usertype">global</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">,</span> tempmotor1</li><li>        movemotor1 <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>motor1<span class="sh_symbol">.</span>value <span class="sh_symbol">-</span> tempmotor1</li><li>        tempmotor1 <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>motor1<span class="sh_symbol">.</span>value</li><li>        print movemotor1</li><li><span class="sh_preproc">        # print</span> movemotor2</li><li><span class="sh_preproc">        # print</span> movemotor3</li><li>        <span class="sh_keyword">if</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">isOpen</span><span class="sh_symbol">():</span></li><li>            <span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"serialcomial is open!"</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">            # serialcom</span><span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'a</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li>            <span class="sh_keyword">if</span> movemotor1 <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span><span class="sh_symbol">:</span></li><li>                <span class="sh_keyword">for</span> i <span class="sh_usertype">in</span><span class="sh_normal"> </span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_type">int</span><span class="sh_symbol">(</span>movemotor1<span class="sh_symbol">)):</span></li><li>                    print <span class="sh_string">'sending a'</span></li><li>                    serialcom<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'a</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">                    # time</span><span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(.</span><span class="sh_number">5</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">                    # print</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">()</span></li><li>                    <span class="sh_usertype">print</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">.</span><span class="sh_function">readline</span><span class="sh_symbol">()</span></li><li>            <span class="sh_keyword">else</span><span class="sh_symbol">:</span></li><li>                <span class="sh_keyword">for</span> i <span class="sh_usertype">in</span><span class="sh_normal"> </span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_function">abs</span><span class="sh_symbol">(</span><span class="sh_type">int</span><span class="sh_symbol">(</span>movemotor1<span class="sh_symbol">))):</span></li><li>                    serialcom<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'d</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">                    # time</span><span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(.</span><span class="sh_number">5</span><span class="sh_symbol">)</span></li><li></li><li><span class="sh_preproc">                    # print</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">()</span></li><li>                    <span class="sh_usertype">print</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">.</span><span class="sh_function">readline</span><span class="sh_symbol">()</span></li><li></li><li><span class="sh_preproc">        # serialcom</span><span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">()</span></li><li></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">movemotor2</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        print <span class="sh_string">"movemotor2called"</span></li><li>        <span class="sh_usertype">global</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">,</span> tempmotor2</li><li>        movemotor2 <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>motor2<span class="sh_symbol">.</span>value <span class="sh_symbol">-</span> tempmotor2</li><li>        tempmotor2 <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>motor2<span class="sh_symbol">.</span>value</li><li>        print movemotor2</li><li>        <span class="sh_keyword">if</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">isOpen</span><span class="sh_symbol">():</span></li><li>            <span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"serialcomial is open!"</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">            # serialcom</span><span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'a</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li>            <span class="sh_keyword">if</span> movemotor2 <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span><span class="sh_symbol">:</span></li><li>                <span class="sh_keyword">for</span> i <span class="sh_usertype">in</span><span class="sh_normal"> </span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_type">int</span><span class="sh_symbol">(</span>movemotor2<span class="sh_symbol">)):</span></li><li>                    print <span class="sh_string">'sending b'</span></li><li>                    serialcom<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'b</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">                    # time</span><span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(.</span><span class="sh_number">5</span><span class="sh_symbol">)</span></li><li></li><li><span class="sh_preproc">                    # print</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">()</span></li><li>                    <span class="sh_usertype">print</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">.</span><span class="sh_function">readline</span><span class="sh_symbol">()</span></li><li>            <span class="sh_keyword">else</span><span class="sh_symbol">:</span></li><li>                <span class="sh_keyword">for</span> i <span class="sh_usertype">in</span><span class="sh_normal"> </span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_function">abs</span><span class="sh_symbol">(</span><span class="sh_type">int</span><span class="sh_symbol">(</span>movemotor2<span class="sh_symbol">))):</span></li><li>                    serialcom<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'e</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">                    # time</span><span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(.</span><span class="sh_number">5</span><span class="sh_symbol">)</span></li><li></li><li><span class="sh_preproc">                    # print</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">()</span></li><li>                    <span class="sh_usertype">print</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">.</span><span class="sh_function">readline</span><span class="sh_symbol">()</span></li><li></li><li></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">movemotor3</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        print <span class="sh_string">"movemotor3called"</span></li><li>        <span class="sh_usertype">global</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">,</span> tempmotor3</li><li>        movemotor3 <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>motor3<span class="sh_symbol">.</span>value <span class="sh_symbol">-</span> tempmotor3</li><li>        tempmotor3 <span class="sh_symbol">=</span> self<span class="sh_symbol">.</span>motor3<span class="sh_symbol">.</span>value</li><li>        print movemotor3</li><li>        <span class="sh_keyword">if</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">isOpen</span><span class="sh_symbol">():</span></li><li>            <span class="sh_function">print</span><span class="sh_symbol">(</span><span class="sh_string">"serialcomial is open!"</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">            # serialcom</span><span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'a</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li>            <span class="sh_keyword">if</span> movemotor3 <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span><span class="sh_symbol">:</span></li><li>                <span class="sh_keyword">for</span> i <span class="sh_usertype">in</span><span class="sh_normal"> </span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_type">int</span><span class="sh_symbol">(</span>movemotor3<span class="sh_symbol">)):</span></li><li>                    print <span class="sh_string">'sending c'</span></li><li>                    serialcom<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'c</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">                    # time</span><span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(.</span><span class="sh_number">5</span><span class="sh_symbol">)</span></li><li></li><li><span class="sh_preproc">                    # print</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">()</span></li><li>                    <span class="sh_usertype">print</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">.</span><span class="sh_function">readline</span><span class="sh_symbol">()</span></li><li>            <span class="sh_keyword">else</span><span class="sh_symbol">:</span></li><li>                <span class="sh_keyword">for</span> i <span class="sh_usertype">in</span><span class="sh_normal"> </span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_function">abs</span><span class="sh_symbol">(</span><span class="sh_type">int</span><span class="sh_symbol">(</span>movemotor3<span class="sh_symbol">))):</span></li><li>                    serialcom<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'f</span><span class="sh_specialchar">\n</span><span class="sh_string">'</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">                    # time</span><span class="sh_symbol">.</span><span class="sh_function">sleep</span><span class="sh_symbol">(.</span><span class="sh_number">5</span><span class="sh_symbol">)</span></li><li></li><li><span class="sh_preproc">                    # print</span> serialcom<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">()</span></li><li>                    <span class="sh_usertype">print</span><span class="sh_normal"> </span>serialcom<span class="sh_symbol">.</span><span class="sh_function">readline</span><span class="sh_symbol">()</span></li><li>    </li><li>    </li><li></li><li></li><li><span class="sh_usertype">class</span><span class="sh_normal"> </span><span class="sh_function">FabApp</span><span class="sh_symbol">(</span>App<span class="sh_symbol">):</span></li><li>    <span class="sh_usertype">def</span><span class="sh_normal"> </span><span class="sh_function">build</span><span class="sh_symbol">(</span>self<span class="sh_symbol">):</span></li><li>        global stage</li><li>        stage <span class="sh_symbol">=</span> <span class="sh_function">virtualMachine</span><span class="sh_symbol">()</span></li><li><span class="sh_preproc">        # print</span> <span class="sh_function">dir</span><span class="sh_symbol">(</span>stage<span class="sh_symbol">.</span>xNode<span class="sh_symbol">)</span></li><li><span class="sh_preproc">        #stage</span><span class="sh_symbol">.</span>xNode<span class="sh_symbol">.</span><span class="sh_function">loadProgram</span><span class="sh_symbol">(</span><span class="sh_string">'../../../086-005/086-005a.hex'</span><span class="sh_symbol">)</span></li><li><span class="sh_preproc">        #stage</span><span class="sh_symbol">.</span>xNode<span class="sh_symbol">.</span><span class="sh_function">setMotorCurrent</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">)</span></li><li></li><li>        stage<span class="sh_symbol">.</span>xNode<span class="sh_symbol">.</span><span class="sh_function">setVelocityRequest</span><span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">)</span>   </li><li>        </li><li>        <span class="sh_keyword">return</span> <span class="sh_function">FabControl</span><span class="sh_symbol">()</span></li><li></li><li></li><li><span class="sh_keyword">if</span> __name__ <span class="sh_symbol">==</span> <span class="sh_string">'__main__'</span><span class="sh_symbol">:</span></li><li>    <span class="sh_function">FabApp</span><span class="sh_symbol">().</span><span class="sh_function">run</span><span class="sh_symbol">()</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;" tabindex="0" contenteditable="">from kivy.uix.popup import Popup
from kivy.app import App
from kivy.uix.gridlayout import GridLayout
from kivy.uix.label import Label
from kivy.uix.textinput import TextInput
from kivy.uix.button import Button
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.stacklayout import StackLayout
from kivy.uix.slider import Slider
from kivy.config import Config

Config.set('modules', 'serial', '')




# Forked from DFUnitVM Oct 2013
# set portname
# set location of hex file for bootloader
#

#------IMPORTS-------
from pygestalt import nodes
from pygestalt import interfaces
from pygestalt import machines
from pygestalt import functions
from pygestalt.machines import elements
from pygestalt.machines import kinematics
from pygestalt.machines import state
from pygestalt.utilities import notice
from pygestalt.publish import rpc   #remote procedure call dispatcher
import time
import io
import threading
import serial


#------VIRTUAL MACHINE------
class virtualMachine(machines.virtualMachine):
    
    def initInterfaces(self):
        if self.providedInterface: self.fabnet = self.providedInterface     #providedInterface is defined in the virtualMachine class.
        else: self.fabnet = interfaces.gestaltInterface('FABNET', interfaces.serialInterface(baudRate = 115200, interfaceType = 'ftdi', portName = '/dev/tty.usbserial-FT0METG6'))
        
    def initControllers(self):
        self.xAxisNode = nodes.networkedGestaltNode('X Axis', self.fabnet, filename = '086-005a.py', persistence = self.persistence)
        self.xNode = nodes.compoundNode(self.xAxisNode)

    def initCoordinates(self):
        self.position = state.coordinate(['mm'])
    
    def initKinematics(self):
        self.xAxis = elements.elementChain.forward([elements.microstep.forward(4), elements.stepper.forward(1.8), elements.leadscrew.forward(6.096), elements.invert.forward(True)])
        
        self.stageKinematics = kinematics.direct(1) #direct drive on all axes
    
    def initFunctions(self):
        self.move = functions.move(virtualMachine = self, virtualNode = self.xNode, axes = [self.xAxis], kinematics = self.stageKinematics, machinePosition = self.position,planner = 'null')
        self.jog = functions.jog(self.move) #an incremental wrapper for the move function
        pass
        
    def initLast(self):
#       self.machineControl.setMotorCurrents(aCurrent = 0.8, bCurrent = 0.8, cCurrent = 0.8)
#       self.xyzNode.setVelocityRequest(0)  #clear velocity on nodes. Eventually this will be put in the motion planner on initialization to match state.
        pass
    
    def publish(self):
#       self.publisher.addNodes(self.machineControl)
        pass
    
    def getPosition(self):
        return {'position':self.position.future()}
    
    def setPosition(self, position  = [None]):
        self.position.future.set(position)

    def setSpindleSpeed(self, speedFraction):
#       self.machineControl.pwmRequest(speedFraction)
        pass


class FabControl(GridLayout):
    def __init__(self, **kwargs):
        super(FabControl, self).__init__(**kwargs)
        self.cols = 3
        self.row = 3

        global serialcom, tempmotor1, tempmotor2, tempmotor3
        tempmotor1 = 120
        tempmotor2 = 90
        tempmotor3 = 90

        serialcom = serial.Serial()
        serialcom.braudrate = 115200
        serialcom.port = "/dev/tty.usbmodem1421"
        serialcom.open()

        


        self.add_widget(Label(text='Motor1  [ 0 to 120 ] '))

        self.motor1 = Slider(min=-30, max=120, value=120)
        self.motor1.bind(value=self.Motor1Change)
        self.add_widget(self.motor1)

        self.motor1value = Label(text=str(self.motor1.value))
        self.add_widget(self.motor1value)


        self.add_widget(Label(text='Motor2  [ 0 to 180 ] '))

        self.motor2 = Slider(min=0, max=180, value=90)
        self.motor2.bind(value=self.Motor2Change)
        self.add_widget(self.motor2)

        self.motor2value = Label(text=str(self.motor2.value))
        self.add_widget(self.motor2value)


        self.add_widget(Label(text='Motor3  [ 45 to 130 ] '))

        self.motor3 = Slider(min=45, max=130, value=90)
        self.motor3.bind(value=self.Motor3Change)
        self.add_widget(self.motor3)

        self.motor3value = Label(text=str(self.motor3.value))
        self.add_widget(self.motor3value)


        self.add_widget(Label(text='Motor4  [ -100 to 100 ] '))

        self.motor4 = Slider(min=-100, max=100, value=0)
        self.motor4.bind(value=self.Motor4Change)
        self.add_widget(self.motor4)

        self.motor4value = Label(text=str(self.motor4.value))
        self.add_widget(self.motor4value)


        self.move = Button(text="Move")
        self.add_widget(self.move)
        self.move.bind(on_press=self.initiatemove)

        self.startrec = Button(text="Start Record")
        self.add_widget(self.startrec)

        self.stoprec = Button(text="Stop Record")
        self.add_widget(self.stoprec)

        self.play = Button(text="Play")
        self.add_widget(self.play)

    def Motor4Change(self, instance, value):
        self.motor4value.text = str(value)

    def Motor1Change(self, instance, value):
        self.motor1value.text = str(value)
        threading.Thread(target=self.movemotor1).start()

    def Motor2Change(self, instance, value):
        self.motor2value.text = str(value)
        threading.Thread(target=self.movemotor2).start()

    def Motor3Change(self, instance, value):
        self.motor3value.text = str(value)
        threading.Thread(target=self.movemotor3).start()

    def initiatemove(self,instance):
        # time.sleep(5)
        threading.Thread(target=self.movemotor4).start()
        threading.Thread(target=self.movemotor1).start()
        threading.Thread(target=self.movemotor2).start()
        threading.Thread(target=self.movemotor3).start()

    def movemotor4(self):
        print "movemotor4 called"
        global stage
        # print stage
        # print self.motor4.value
        # print self.motor1.value
        # print self.motor2.value
        # print self.motor3.value

        # 
        movemotor4 = int(self.motor4.value)

        supercoords = [[movemotor4]]

        for coords in supercoords:
            stage.move(coords, 0)
            status = stage.xAxisNode.spinStatusRequest()
            while status['stepsRemaining'] &gt; 0:
                time.sleep(0.001)
                status = stage.xAxisNode.spinStatusRequest()




    # ser = serial.Serial()
    # ser.braudrate = 115200
    # ser.port = "/dev/tty.usbmodem1411"
    # ser.open()
    def movemotor1(self):
        print "movemotor1called"
        global serialcom, tempmotor1
        movemotor1 = self.motor1.value - tempmotor1
        tempmotor1 = self.motor1.value
        print movemotor1
        # print movemotor2
        # print movemotor3
        if serialcom.isOpen():
            print("serialcomial is open!")
            # serialcom.write('a\n')
            if movemotor1 &gt; 0:
                for i in range(int(movemotor1)):
                    print 'sending a'
                    serialcom.write('a\n')
                    # time.sleep(.5)
                    # print serialcom.read()
                    print serialcom.readline()
            else:
                for i in range(abs(int(movemotor1))):
                    serialcom.write('d\n')
                    # time.sleep(.5)

                    # print serialcom.read()
                    print serialcom.readline()

        # serialcom.close()


    def movemotor2(self):
        print "movemotor2called"
        global serialcom, tempmotor2
        movemotor2 = self.motor2.value - tempmotor2
        tempmotor2 = self.motor2.value
        print movemotor2
        if serialcom.isOpen():
            print("serialcomial is open!")
            # serialcom.write('a\n')
            if movemotor2 &gt; 0:
                for i in range(int(movemotor2)):
                    print 'sending b'
                    serialcom.write('b\n')
                    # time.sleep(.5)

                    # print serialcom.read()
                    print serialcom.readline()
            else:
                for i in range(abs(int(movemotor2))):
                    serialcom.write('e\n')
                    # time.sleep(.5)

                    # print serialcom.read()
                    print serialcom.readline()


    def movemotor3(self):
        print "movemotor3called"
        global serialcom, tempmotor3
        movemotor3 = self.motor3.value - tempmotor3
        tempmotor3 = self.motor3.value
        print movemotor3
        if serialcom.isOpen():
            print("serialcomial is open!")
            # serialcom.write('a\n')
            if movemotor3 &gt; 0:
                for i in range(int(movemotor3)):
                    print 'sending c'
                    serialcom.write('c\n')
                    # time.sleep(.5)

                    # print serialcom.read()
                    print serialcom.readline()
            else:
                for i in range(abs(int(movemotor3))):
                    serialcom.write('f\n')
                    # time.sleep(.5)

                    # print serialcom.read()
                    print serialcom.readline()
    
    


class FabApp(App):
    def build(self):
        global stage
        stage = virtualMachine()
        # print dir(stage.xNode)
        #stage.xNode.loadProgram('../../../086-005/086-005a.hex')
        #stage.xNode.setMotorCurrent(1)

        stage.xNode.setVelocityRequest(8)   
        
        return FabControl()


if __name__ == '__main__':
    FabApp().run()

</pre></div></div>
    
    
    <p>To run this code on the ubuntu you have to download the kivy module you can download the kivy module by doing two steps below</p>
    <code><li>$ sudo add-apt-repository ppa:kivy-team/kivy</li></code>
       <code><li>	$ sudo apt-get install python3-kivy</li></code>     

<p>Once you are done with it you can simplely run the program using the command kivy fabarmkivy.py </p>
    
    <center><img src="img/w11/UI.jpg" width=80% height=auto></center>
                    <center>UI Design </center>
     <a href="res/fabarmkivy.py" target="_blank">
	<button type="button" class="btn btn-primary btn-lg">Python code download</button>
	</a>
    
    </div>
	</div>
</div>
</div>
    <!-- Footer -->
<div id="footer">

</div>
<footer class="footer-distributed">



<div class="footer-right">

<a href="https://www.facebook.com/scitechindian"><i class="fa fa-facebook"></i></a>
<a href="https://twitter.com/scitechindian"><i class="fa fa-twitter"></i></a>
<a href="https://in.linkedin.com/in/scitechindian"><i class="fa fa-linkedin"></i></a>
<a href="https://github.com/scitechindian"><i class="fa fa-github"></i></a>

</div>


<div class="footer-left">

<p class="footer-links">
<a href="index.html">Home</a>
·
<a href="assignments.html">Weekly Assignments</a>
·
<a href="project.html">Final Project</a>
·
<a href="about.html">About me</a>
.<a href="http://www.fablabkerala.in"> Fablab Kerala</a>
.<a href="http://archive.fabacademy.org/archives/2017/fablabtrivandrum/">Fab Academy
</a>
</p>
<p>My Fab Diary, 2017</p>
</div>

</div>
</footer>
         <div class="container">
                 <center><p> &copy; 2017, made with <i class="fa fa-heart heart"></i> by scitechindian </p></center>
                    </div>
         
<center><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br /></center>
       <center> <p><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">This work done</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://archive.fabacademy.org/archives/2017/fablabtrivandrum/students/213" property="cc:attributionName" rel="cc:attributionURL">SYED JUNAID AHMED</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p></center>

          <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>

<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        document.getElementById("myBtn").style.display = "block";
    } else {
        document.getElementById("myBtn").style.display = "none";
    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}
</script> 
      <!-- jQuery -->
      <script src="js/jquery/jquery.min.js"></script>
      <!-- Bootstrap Core JavaScript -->
      <script src="js/bootstrap/js/bootstrap.min.js"></script>
      <!-- Plugin JavaScript -->
      <script src="js/jquery/jquery-easing.min.js"></script>
      <!-- Theme JavaScript -->
      <script src="js/creative.min.js"></script>
<script src="js/shi_jquery.min.js"></script>
</body>

</html>
